
<!doctype html>
<html lang="en">
<head>

<!-- all praise to https://realfavicongenerator.net -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="/fonts.css">
  <link rel="stylesheet" href="../pbrstyle.css">
  <link rel="stylesheet" href="/fontawesome-free-5.15.3-web/css/all.css">

  <script async src="https://cse.google.com/cse.js?cx=003601324460585362024:4xwpwgaitgd"></script>
  <script src="/react.min.js"></script>
  <script src="/react-dom.min.js"></script>
  <script src="/jeri.min.js"></script>
  <link rel="preload" href="/exr.worker.js" as="script" crossorigin="anonymous">
        
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/bootstrap.min.css">

  <title>Further Reading</title>
</head>
        
<body>

<nav class="fixed-top-lg-navbar navbar navbar-expand bg-light navbar-light">
  <ul class="nav navbar-nav">
    <a class="navbar-brand" href="../contents.html"><img src="../pbr.jpg" width=25 height=25></a>
    <li class="nav-item"><a class="nav-link" href="../Utilities.html">Utilities</a></li>
    <span class="navbar-text">/</span>
    <li class="nav-item"><a class="nav-link" href="#">Further Reading</a></li>
    <span class="navbar-text">&nbsp;&nbsp;</span>
    <li class="nav-item"><a class="nav-link" href="../Utilities/Statistics.html">(Previous: Statistics)</a></li>
  </ul>

  <ul class="nav navbar-nav ml-auto d-none d-md-block">
        <li class="nav-item"><div class="gcse-search"></div></li>
    </ul>
  <ul class="nav navbar-nav d-block d-md-none">
        <li class="nav-item"><div class="gcse-search"></div></li>
    </ul>
</nav>

<div class="maincontainer">
<div class="container-fluid">

<div class="row">
<div class="col-md-1 col-lg-2 leftcolumn">

</div>
<div class="col-md-10 col-lg-8">

</div> <!-- col-md-10 col-lg-8 -->
<div class="col-md-1 col-lg-2">

</div> <!-- col-md-1 col-lg-2 -->
</div>  <!-- row -->

<div class="row">
<div class="col-md-1 col-lg-2 leftcolumn">
<a href="#"><i class="fas fa-link "></i></a>
</div>
<div class="col-md-10 col-lg-8">
<h2>Further Reading</h2><p>


</p>
<p><em>Hacker&rsquo;s Delight</em> (Warren&nbsp;<a href="#cite:HackersDelight">2006</a>), is a delightful and
thought-provoking exploration of the bit-twiddling algorithms like those
used in some of the utility routines in this appendix.
Sean Anderson (<a href="#cite:Anderson2004">2004</a>) has a
Web page filled with a collection of bit-twiddling techniques like the ones
in <a href="../Utilities/Main_Include_File.html#IsPowerOf2"><tt>IsPowerOf2()</tt></a> and <a href="../Utilities/Main_Include_File.html#RoundUpPow2"><tt>RoundUpPow2()</tt></a>
at <a href="http://graphics.stanford.edu/~seander/bithacks.html">graphics.stanford.edu/~seander/bithacks.html</a>.

</p>
<p><em>Numerical Recipes</em>, by Press et al. (<a href="#cite:Press92">1992</a>), and Atkinson&rsquo;s book (<a href="#cite:Atkinson1993">1993</a>) on numerical analysis both discuss algorithms for matrix inversion and
solving linear systems.

</p>
<p>The PCG random number generator was developed by O&rsquo;Neill (<a href="#cite:ONeill2014">2014</a>). The
paper describing its implementation is well written and also features extensive
discussion of a range of previous pseudo-random number generators and the
challenges that they have faced in passing rigorous tests of their quality
(L&rsquo;Ecuyer and Simard&nbsp;<a href="#cite:LEcuyer2007">2007</a>).

</p>
<p>Many papers have been written on cache-friendly programming techniques;
only a few are surveyed here.  Ericson&rsquo;s chapter
(<a href="#cite:Ericson04">2004</a>) on high-performance
programming techniques has very good coverage of this topic.
Lam, Rothberg, and Wolf (<a href="#cite:Lam91">1991</a>) investigated blocking
(tiling) for improving cache performance and developed techniques for
selecting appropriate block sizes, given the size of the arrays and the
cache size.  Grunwald, Zorn, and Henderson (<a href="#cite:grunwald93improving">1993</a>) were one of the first
groups of researchers to investigate the interplay between memory
allocation algorithms and the cache behavior of applications.

</p>
<p>In <tt>pbrt</tt>, we only worry about cache layout issues for dynamically allocated
data.  However, Calder et al. (<a href="#cite:calder98cacheconscious">1998</a>) show a profile-driven system that optimizes
memory layout of global variables, constant values, data on the stack, and
dynamically allocated data from the heap in order to reduce cache conflicts
among them all, giving an average 30%
reduction in data cache misses for the applications they studied.

</p>
<p>Blocking for tree data structures was investigated by Chilimbi et al. (<a href="#cite:Chilimbi99layout">1999</a>); they ensured that nodes of the tree and a few levels of its
children were allocated contiguously.  Among other applications, they
applied their tool to the layout of the acceleration octree in the
<em>Radiance</em> renderer and reported a 42% speedup in run time.  Chilimbi et al. (<a href="#cite:Chilimbi99definition">1999</a>) also evaluated the effectiveness of reordering
fields inside structures to improve locality.

</p>
<p>Drepper&rsquo;s paper (<a href="#cite:Drepper07">2007</a>) is a useful resource for understanding performance
issues related to caches, cache coherence, and main memory access,
particularly in multicore systems.

</p>
<p>Boehm&rsquo;s paper <em>Threads Cannot Be Implemented as a Library</em> (<a href="#cite:Boehm05">2005</a>)
makes the remarkable (and disconcerting) observation that multi-threading
cannot be reliably implemented without the compiler having explicit
knowledge of the fact that multi-threaded execution is expected.  Boehm
presented a number of examples that demonstrate the corresponding dangers
in 2005-era compilers and language standards like C and C++ that did not
have awareness of threading.  Fortunately, the C++11 and C11 standards
addressed the issues that he identified.

</p>
<p><tt>pbrt</tt>&rsquo;s parallel <tt>for</tt> loop-based approach to multi-threading is a
widely used technique for multi-threaded programming; the OpenMP standard
supports a similar construct (and much more) (OpenMP Architecture Review
Board&nbsp;<a href="#cite:OpenMP13">2013</a>).  A slightly more general model for multi-core parallelism is
available from <em>task systems</em>, where computations are broken up into a
set of independent tasks that can be executed concurrently.  Blumofe et&nbsp;al. (<a href="#cite:Blumofe96">1996</a>) described the task scheduler in Cilk, and Blumofe and
Leiserson (<a href="#cite:Blumofe99">1999</a>) describe the work-stealing algorithm that is the mainstay
of many current high-performance task systems.

</p>
<p></p>
<h3>References</h3>
<ol style="list-style: none;">
<li class="bibitem" id="cite:Anderson2004">Anderson, S. 2004. <em>graphics.stanford.edu/<svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.797ex" height="1.343ex" style="vertical-align: 0.309ex; margin-bottom: -0.48ex;" viewBox="0 -504.3 773.5 578.1" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" aria-labelledby="MathJax-SVG-1-Title">
<title id="MathJax-SVG-1-Title">tilde</title>
<defs aria-hidden="true">
<path stroke-width="1" id="E1-LATINMODERNMAIN-223C" d="M717 354c-4 -116 -34 -183 -119 -211c-15 -4 -30 -7 -45 -7c-66 0 -130 46 -184 95c-44 39 -93 81 -146 81c-10 0 -21 -1 -31 -5c-70 -23 -109 -67 -112 -161c0 -7 -6 -12 -12 -12c-7 0 -12 5 -12 12c4 116 34 183 120 211c14 4 29 7 44 7c66 0 130 -46 184 -95 c44 -39 93 -81 146 -81c11 0 21 1 32 5c69 23 108 67 111 161c0 7 6 12 12 12c7 0 12 -5 12 -12Z"></path>
</defs>
<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)" aria-hidden="true">
 <use xlink:href="#E1-LATINMODERNMAIN-223C" x="0" y="0"></use>
</g>
</svg>seander/bithacks.html.</em>
</li>

<li class="bibitem" id="cite:Atkinson1993">Atkinson, K.
<em>Elementary Numerical Analysis.</em> New York: John Wiley &amp; Sons.
</li>

<li class="bibitem" id="cite:berger01composing">Berger, E.&nbsp;D., B.&nbsp;G. Zorn, and K.&nbsp;S. McKinley. 2001.
Composing high-performance memory allocators.
In <em>SIGPLAN Conference on Programming Language Design and
  Implementation,</em> 114&ndash;24.
</li>

<li class="bibitem" id="cite:Berger02">Berger, E.&nbsp;D., B.&nbsp;G. Zorn, and K.&nbsp;S. McKinley. 2002.
Reconsidering custom memory allocation.
In <em>Proceedings of ACM OOPSLA 2002</em>.
</li>

<li class="bibitem" id="cite:Blumofe99">Blumofe, R., and C.&nbsp;Leiserson. 1999.
Scheduling multithreaded computations by work stealing.
<em>Journal of the ACM</em>&nbsp;<em>46</em>&thinsp;(5), 720&ndash;48.
</li>

<li class="bibitem" id="cite:Blumofe96">Blumofe, R., C.&nbsp;Joerg, B.&nbsp;Kuszmaul, C.&nbsp;Leiserson, K.&nbsp;Randall, and
 Y.&nbsp;Zhou. 1996.
Cilk: an efficient multithreaded runtime system.
<em>Journal of Parallel and Distributed Compututing</em>&nbsp;<em>37</em>&thinsp;(1),
55&ndash;69.
</li>

<li class="bibitem" id="cite:Boehm05">Boehm, H.-J. 2005.
Threads cannot be implemented as a library.
<em>ACM SIGPLAN Notices</em> <em>40</em>&thinsp;(6), 261&ndash;68.
</li>

<li class="bibitem" id="cite:calder98cacheconscious">Calder, B., K.&nbsp;Chandra, S.&nbsp;John, and T.&nbsp;Austin. 1998.
Cache-conscious data placement.
In <em>Proceedings of the Eighth International Conference on
  Architectural Support for Programming Languages and Operating Systems
  (ASPLOS-VIII),</em> San Jose.
</li>

<li class="bibitem" id="cite:Chilimbi99definition">Chilimbi, T.&nbsp;M., B.&nbsp;Davidson, and J.&nbsp;R. Larus. 1999a.
Cache-conscious structure definition.
In <em>SIGPLAN Conference on Programming Language Design and
  Implementation,</em> 13&ndash;24.
</li>

<li class="bibitem" id="cite:Chilimbi99layout">Chilimbi, T.&nbsp;M., M.&nbsp;D. Hill, and J.&nbsp;R. Larus. 1999b.
Cache-conscious structure layout.
In <em>SIGPLAN Conference on Programming Language Design and
  Implementation,</em> 1&ndash;12.
</li>

<li class="bibitem" id="cite:Drepper07">Drepper, U. 2007.
What every programmer should know about memory.
<a href="http://people.redhat.com/drepper/cpumemory.pdf">people.redhat.com/drepper/cpumemory.pdf</a>.
</li>

<li class="bibitem" id="cite:Ericson04">Ericson, C. 2004.
<em>Real-Time Collision Detection</em>.
 Morgan Kaufmann Series in Interactive 3D Technology.
San Francisco: Morgan Kaufmann.
</li>

<li class="bibitem" id="cite:grunwald93improving">Grunwald, D., B.&nbsp;G. Zorn, and R.&nbsp;Henderson. 1993.
Improving the cache locality of memory allocation.
In <em>SIGPLAN Conference on Programming Language Design and
  Implementation,</em> 177&ndash;86.
</li>

<li class="bibitem" id="cite:Johnstone99">Johnstone, M.&nbsp;S., and P.&nbsp;R. Wilson. 1999.
The memory fragmentation problem: solved?
<em>ACM SIGPLAN Notices</em>&nbsp;<em>34</em>&thinsp;(3), 26&ndash;36.
</li>

<li class="bibitem" id="cite:Kainz04">Kainz, F., R.&nbsp;Bogart, and D.&nbsp;Hess. 2004.
The OpenEXR File Format.
In R. Fernando (Ed.), <em>GPU Gems</em>.
Reading, Massachusetts: Addison-Wesley,
425&ndash;44.
</li>

<li class="bibitem" id="cite:LEcuyer2007">L&rsquo;Ecuyer, P., and R&nbsp;Simard.
TestU01: a C library for empirical testing of random number
generators.
In <em>ACM Transactions on Mathemathical Software</em>&nbsp;<em>33</em>&thinsp;(4).
</li>

<li class="bibitem" id="cite:Lam91">Lam, M.&nbsp;S., E.&nbsp;E. Rothberg, and M.&nbsp;E. Wolf. 1991.
The cache performance and optimizations of blocked algorithms.
In <em>Proceedings of the Fourth International Conference on
  Architectural Support for Programming Languages and Operating Systems
  (ASPLOS-IV),</em> Palo Alto, California.
</li>

<li class="bibitem" id="cite:ONeill2014">O&rsquo;Neill, M.
PCG: A family of simple fast space-efficient statistically good algorithms
for random number generation.
Unpublished manuscript. <a href="http://www.pcg-random.org/paper.html">http://www.pcg-random.org/paper.html</a>.
</li>

<li class="bibitem" id="cite:OpenMP13">OpenMP Architecture Review Board. 2013.
OpenMP Application Program Interface.
<a href="http://www.openmp.org/mp-documents/OpenMP4.0.0.pdf">http://www.openmp.org/mp-documents/OpenMP4.0.0.pdf</a>.
</li>

<li class="bibitem" id="cite:Patterson:Architecture">Patterson, D., and J.&nbsp;Hennessy. 2006.
<em>Computer Architecture: A Quantitative Approach</em>. San Francisco:
Morgan Kaufmann.
</li>

<li class="bibitem" id="cite:Press92">Press, W.&nbsp;H., S.&nbsp;A. Teukolsky, W.&nbsp;T. Vetterling, and B.&nbsp;P. Flannery. 1992.
<em>Numerical Recipes in C: The Art of Scientific Computing</em> (2nd
  ed.).
Cambridge: Cambridge University Press.
</li>

<li class="bibitem" id="cite:truong98improving">Truong, D.&nbsp;N., F.&nbsp;Bodin, and A.&nbsp;Seznec. 1998.
Improving cache behavior of dynamically allocated data structures.
In <em>IEEE PACT,</em> 322&ndash;29.
</li>

<li class="bibitem" id="cite:HackersDelight">Warren, H. 2006.
<em>Hacker&rsquo;s Delight</em>.
Reading, Massachusetts: Addison-Wesley.
</li>

<li class="bibitem" id="cite:paul95dynamic">Wilson, P.&nbsp;R., M.&nbsp;S. Johnstone, M.&nbsp;Neely, and D.&nbsp;Boles. 1995.
Dynamic storage allocation: a survey and critical review.
In <em>Proceedings International Workshop on Memory Management,</em> Kinross, Scotland.
</li>

</ol>
<p>


</p>
<p>

</p>
<p></p>

</div> <!-- col-md-10 col-lg-8 -->
<div class="col-md-1 col-lg-2">

</div> <!-- col-md-1 col-lg-2 -->
</div>  <!-- row -->

</div>  <!-- container-fluid -->
</div>  <!-- maincontainer -->

<nav class="navbar navbar-expand-md bg-light navbar-light">
  <div class="container-fluid-nav">
    <!--  <ul class="nav navbar-nav navbar-center"> -->
      <span class="navbar-text" style="text-align: center;">
        Thanks to William Newhall and 43 others for generously supporting <i>Physically
        Based Rendering</i> online
        through <a href="https://patreon.com/pbrbook">Patreon</a>.
    </span>
  </div>
</nav>

<nav class="navbar navbar-expand-md bg-light navbar-light">
  <span class="navbar-text"><i>Physically Based Rendering: From Theory To Implementation</i>, &copy; 2004-2021 Matt Pharr, Wenzel Jakob, and Greg Humphreys under the <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a> license. (<a href="https://github.com/mmp/pbr-book-website/">github</a>)</span>
  <div class="container">
    <ul class="nav navbar-nav ml-auto">
      <li class="nav-item">Next: <a href="../Utilities/Exercises.html">Utilities / Exercises</a></li>
    </ul>
  </div>

</nav>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script>
  $(function () {
    $('[data-toggle="popover"]').popover()
    $('[data-toggle="tooltip"]').tooltip()
   })
</script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<script>
// https://stackoverflow.com/a/17535094
// The function actually applying the offset
function offsetAnchor() {
  if (location.hash.length !== 0) {
    window.scrollTo(window.scrollX, window.scrollY - window.innerHeight / 8);
  }
}

// Captures click events of all <a> elements with href starting with #
$(document).on('click', 'a[href^="#"]', function(event) {
  // Click events are captured before hashchanges. Timeout
  // causes offsetAnchor to be called after the page jump.
  window.setTimeout(function() {
    offsetAnchor();
  }, 500);
});

// Set the offset when entering page with hash present in the url
window.setTimeout(offsetAnchor, 1500);
</script>

</body>
</html>
